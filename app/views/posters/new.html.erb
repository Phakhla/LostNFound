<%= simple_form_for :post, { url: post_posters_path(), method: "get", data: { controller: 'maps' } } do |f| %>
  <div class = "container pb-5" >
    <div class="col text-start mb-5" style="font-size: 20px;">
      <%= link_to(root_path, style: 'text-decoration: none;') do %>
          <i class="fa-solid fa-arrow-left"></i>
          ย้อนกลับ
      <% end %>
    </div>
    <div class = "card p-5 border-dark" style="border-radius: 15px" >
    <h4 class = "subtitle pb-3">สร้างโปสเตอร์</h4>
    <hr>
    <%= f.error_notification %>
    <%= f.hidden_field :lat, data: { maps_target: "latitude" } %>
    <%= f.hidden_field :lng, data: { maps_target: "longitude" } %>
    <%= f.hidden_field :location, data: { maps_target: "address" } %>
    <%= content_tag :div, nil, data: { maps_target: "map" } %>

    <% if @post.user.avatar.present? %>
      <%= f.hidden_field :avatar , value: "#{url_for(@post.user.avatar)}" %>
    <% else %>
      <%= f.hidden_field :avatar, value: "https://media.istockphoto.com/vectors/default-profile-picture-avatar-photo-placeholder-vector-illustration-vector-id1223671392?k=20&m=1223671392&s=612x612&w=0&h=lGpj2vWAI3WUT1JeJWm1PRoHT3V15_1pdcTn2szdwQ0=" %>
    <% end %>

    <div class="form-group col-md-9 pt-4">
      <%= f.input :name, label: 'หัวข้อโพสต์', required: true, :label_html => { :class => 'font-weight600' },:disabled => true %>
    </div>

    <div class="form-group col-md-12 py-5">
      <% if @post.images.attached? %>
      <p class = "font-weight600">เลือกรูปภาพ*</p>
      <div class="d-flex justify-content-between">
        <% @post.images.each do |image| %>
          <label>
            <div class = "radio"><%= f.radio_button :image, polymorphic_url(image), :checked => true, class: 'radiobtn' %></div>
            <div class = "chooseimg"><%= image_tag(image, style:"width: 100%; max-width: 220px; height:220px; object-fit:cover; border-radius: 8px;") %></div>
          </label>
        <% end %>
      </div>
      <p class = "color--red pt-4">*สามารถเลือกรูปสำหรับทำโปสเตอร์ได้เพียง 1 รูปเท่านั้น</p>
      <% end %>
    </div>

    <div class="row mb-5">
      <div class="col-md-3">
        <%= f.input :type_id, :label => "ประเภท", :collection => Type.all.map{ |l| [l.type_name, l.id] }, :label_html => { :class => 'font-weight600' }, include_blank: 'เลือก', :disabled => true %>
      </div>

      <div class="col-md-3">
        <%= f.input :date, :label => "วันที่", as: :date, html5: true, :label_html => { :class => 'font-weight600' }, input_html: {}, :disabled => true %>
      </div>

    </div>

    <div class="form-group mb-5 col-md-9">
      <%= f.input :location, label: 'สถานที่',
        input_html: { data: { maps_target: "field", action: "maps#setAutocomplete" }},
        label_html: { class: 'font-weight600' }, :disabled => true %>
    </div>

    <div class="form-group mb-5 pb-5 col-md-9">
      <%= f.input :detail, as: :text, :input_html => { :rows => 7 , :style => 'height: 100%'}, label: 'รายละเอียด', :label_html => { :class => 'font-weight600' } %>
    </div>
    <hr>
    <div class="d-flex justify-content-end mt-5">
      <div class="pe-5">
        <%= link_to "ยกเลิก", "/posts/#{@post.id}", class: "btn btn--outline-primary"%>
      </div>
      <div>
        <%= f.button :button, "สร้างโปสเตอร์", type: "submit", class: "btn--primary" %>
      </div>
    </div>
  <% end %>

  </div>
</div>
